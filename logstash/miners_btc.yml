input {
    file {
        path => "C:/Users/Defaut2/Documents/Python_exos/Pandas/Crypto/miners_revenue/miners.csv"
        start_position => beginning
        sincedb_path => "NUL"
 }
}

filter {
    csv {
        columns => ["Timestamp","price"]
        separator => ","
        skip_header => "true"
    }
    date {
        match => [ "Timestamp", "yyyy-MM-dd HH:mm:ss"]
    }
    mutate {
        copy => { "[@timestamp]" => "Timestamp"}
        convert => { "price" => "integer"}
    }    
}


output {
   stdout { codec => json }
   elasticsearch {
       hosts => ["localhost:9200"]
       index => "test_miners_revenue"
       user => "logstash_internal"
       password => "x-pack-test-password"
   }
}
